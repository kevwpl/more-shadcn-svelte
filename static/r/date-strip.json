{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "date-strip",
	"title": "Date Strip",
	"type": "registry:ui",
	"description": "A horizontal strip of dates with optional navigation.",
	"dependencies": [
		"@lucide/svelte@^0.554.0"
	],
	"devDependencies": [
		"@lucide/svelte@^0.544.0",
		"@internationalized/date@^3.10.0"
	],
	"registryDependencies": [
		"button"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\n\timport { cn } from '$UTILS$';\n\timport { setDateStripContext } from './ctx';\n\timport { Button } from '$lib/components/ui/button';\n\timport { ChevronLeft, ChevronRight } from '@lucide/svelte';\n\timport type { Snippet } from 'svelte';\n\timport { type DateValue, getLocalTimeZone, today, startOfWeek } from '@internationalized/date';\n\n\tlet {\n\t\tvalue = $bindable(),\n\t\tclass: className,\n\t\tdaysToShow = 5,\n\t\tisDateDisabled = () => false,\n\t\tonDateChange,\n\t\tchildren\n\t}: {\n\t\tvalue?: DateValue | undefined;\n\t\tclass?: string;\n\t\tdaysToShow?: number;\n\t\tisDateDisabled?: (date: DateValue) => boolean;\n\t\tonDateChange?: (date: DateValue) => void;\n\t\tchildren: Snippet<[{ date: DateValue }]>;\n\t} = $props();\n\n\tlet startDate = $state(startOfWeek(today(getLocalTimeZone()), 'en-US'));\n\tlet slideDirection = $state<'start' | 'end'>('end');\n\n\tconst displayedDates = $derived(\n\t\tArray.from({ length: daysToShow }, (_, i) => startDate.add({ days: i }))\n\t);\n\n\tfunction handlePrev() {\n\t\tslideDirection = 'start';\n\t\tstartDate = startDate.add({ days: -daysToShow });\n\t}\n\n\tfunction handleNext() {\n\t\tslideDirection = 'end';\n\t\tstartDate = startDate.add({ days: daysToShow });\n\t}\n\n\tsetDateStripContext({\n\t\tselectedValue: () => value,\n\t\tonSelect: (d) => {\n\t\t\tvalue = d;\n\t\t\tonDateChange?.(d);\n\t\t},\n\t\tisDateDisabled,\n\t\tdirection: () => slideDirection\n\t});\n</script>\n\n<div class={cn('flex items-center gap-2 rounded-xl border bg-card p-1 shadow-sm', className)}>\n\t<Button variant=\"ghost\" size=\"icon\" class=\"h-7 w-7 shrink-0\" onclick={handlePrev}>\n\t\t<ChevronLeft class=\"h-4 w-4\" />\n\t</Button>\n\n\t<div class=\"flex flex-1 justify-between gap-1 overflow-hidden\">\n\t\t{#each displayedDates as date (date.toString())}\n\t\t\t{@render children({ date })}\n\t\t{/each}\n\t</div>\n\n\t<Button variant=\"ghost\" size=\"icon\" class=\"h-7 w-7 shrink-0\" onclick={handleNext}>\n\t\t<ChevronRight class=\"h-4 w-4\" />\n\t</Button>\n</div>\n",
			"type": "registry:ui",
			"target": "date-strip/date-strip.svelte"
		},
		{
			"content": "<script lang=\"ts\">\n\timport { cn } from '$UTILS$';\n\timport { getDateStripContext } from './ctx';\n\timport { type DateValue, getLocalTimeZone, isToday } from '@internationalized/date';\n\timport { DateFormatter } from '@internationalized/date';\n\timport { Button } from '$lib/components/ui/button';\n\n\tlet {\n\t\tdate,\n\t\tclass: className\n\t}: {\n\t\tdate: DateValue;\n\t\tclass?: string;\n\t} = $props();\n\n\tconst ctx = getDateStripContext();\n\tconst formatterMonth = new DateFormatter('en-US', { month: 'short' });\n\tconst formatterDay = new DateFormatter('en-US', { day: 'numeric' });\n\n\tlet isSelected = $derived(ctx.selectedValue()?.compare(date) === 0);\n\tlet isDisabled = $derived(ctx.isDateDisabled(date));\n    let direction = $derived(ctx.direction());\n\n\tfunction handleClick() {\n\t\tif (!isDisabled) {\n\t\t\tctx.onSelect(date);\n\t\t}\n\t}\n\n\tconst dateObj = $derived(date.toDate('UTC'));\n</script>\n\n<Button\n        variant=\"ghost\"\n        onclick={handleClick}\n        class={cn(\n        \"flex flex-col items-center justify-center -space-y-1 animate-in fade-in-5\",\n        \"w-12 h-12 shrink-0 rounded-lg\",\n        direction === \"end\" ? \"slide-in-from-right-12\" : \"slide-in-from-left-12\",\n        isToday(date, getLocalTimeZone()) && \"bg-accent\",\n        isSelected && \"bg-primary text-primary-foreground\",\n        className\n    )}\n        disabled={isDisabled}\n>\n    <span class=\"text-[8px] font-medium uppercase opacity-70\">\n        {formatterMonth.format(dateObj)}\n    </span>\n    <span class=\"text-base font-bold leading-none\">\n        {formatterDay.format(dateObj)}\n    </span>\n</Button>",
			"type": "registry:ui",
			"target": "date-strip/date-strip-item.svelte"
		},
		{
			"content": "import DateStrip from \"./date-strip.svelte\";\nimport DateStripItem from \"./date-strip-item.svelte\";\n\nexport {\n    DateStrip as Root,\n    DateStripItem as Item,\n};",
			"type": "registry:ui",
			"target": "date-strip/index.ts"
		},
		{
			"content": "import { getContext, setContext } from \"svelte\";\nimport type { DateValue } from \"@internationalized/date\";\n\nconst DATESTRIP_KEY = Symbol(\"datestrip\");\n\ntype DateStripContext = {\n    selectedValue: () => DateValue | undefined;\n    onSelect: (date: DateValue) => void;\n    isDateDisabled: (date: DateValue) => boolean;\n    direction: () => \"start\" | \"end\";\n};\n\nexport function setDateStripContext(props: DateStripContext) {\n    setContext(DATESTRIP_KEY, props);\n}\n\nexport function getDateStripContext() {\n    return getContext<DateStripContext>(DATESTRIP_KEY);\n}",
			"type": "registry:ui",
			"target": "date-strip/ctx.ts"
		}
	]
}