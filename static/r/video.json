{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "video",
	"title": "Video",
	"type": "registry:ui",
	"description": "A responsive video player with controls and progress bar.",
	"dependencies": [
		"@lucide/svelte@^0.554.0"
	],
	"devDependencies": [
		"@lucide/svelte@^0.544.0"
	],
	"registryDependencies": [
		"button"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\n\timport { cn } from '$UTILS$';\n\timport { Play, Pause, Volume2, VolumeX, Maximize, Minimize, Loader2 } from '@lucide/svelte';\n\timport { onMount } from 'svelte';\n\timport { Slider } from '$lib/components/ui/slider';\n\n\tlet {\n\t\tsrc,\n\t\tposter,\n\t\tclass: className,\n\t\tautoplay = false,\n\t\tloop = false,\n\t\tmuted = false\n\t} = $props<{\n\t\tsrc: string;\n\t\tposter?: string;\n\t\tclass?: string;\n\t\tautoplay?: boolean;\n\t\tloop?: boolean;\n\t\tmuted?: boolean;\n\t}>();\n\n\tlet video: HTMLVideoElement;\n\tlet isPlaying = $state(false);\n\tlet currentTime = $state(0);\n\tlet duration = $state(0);\n\tlet volume = $state(1);\n\tlet isMuted = $state(muted);\n\tlet isFullscreen = $state(false);\n\tlet showControls = $state(false);\n\tlet controlsTimeout: number;\n\tlet isLoading = $state(true);\n\tlet lastVolume = $state(1);\n\n\tfunction togglePlay() {\n\t\tif (video.paused) {\n\t\t\tvideo.play();\n\t\t} else {\n\t\t\tvideo.pause();\n\t\t}\n\t}\n\n\tfunction handlePlay() {\n\t\tisPlaying = true;\n\t\tisLoading = false;\n\t\tshowControlsTemporarily();\n\t}\n\n\tfunction handlePause() {\n\t\tisPlaying = false;\n\t\tshowControls = true;\n\t}\n\n\tfunction handleTimeUpdate() {\n\t\tcurrentTime = video.currentTime;\n\t}\n\n\tfunction handleDurationChange() {\n\t\tduration = video.duration;\n\t}\n\n\tfunction handleSeek(e: Event) {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst time = parseFloat(target.value);\n\t\tvideo.currentTime = time;\n\t\tcurrentTime = time;\n\t}\n\n\tfunction handleVolumeChange(val: number) {\n\t\tconst newVolume = val;\n\t\tvolume = newVolume;\n\t\tvideo.volume = newVolume;\n\t\tisMuted = newVolume === 0;\n\t\tif (newVolume > 0) lastVolume = newVolume;\n\t}\n\n\tfunction toggleMute() {\n\t\tif (isMuted) {\n\t\t\tisMuted = false;\n\t\t\tvolume = lastVolume > 0 ? lastVolume : 1;\n\t\t\tvideo.muted = false;\n\t\t\tvideo.volume = volume;\n\t\t} else {\n\t\t\tisMuted = true;\n\t\t\tlastVolume = volume;\n\t\t\tvolume = 0;\n\t\t\tvideo.muted = true;\n\t\t\tvideo.volume = 0;\n\t\t}\n\t}\n\n\tfunction toggleFullscreen() {\n\t\tif (!document.fullscreenElement) {\n\t\t\tvideo.parentElement?.requestFullscreen();\n\t\t\tisFullscreen = true;\n\t\t} else {\n\t\t\tdocument.exitFullscreen();\n\t\t\tisFullscreen = false;\n\t\t}\n\t}\n\n\tfunction formatTime(seconds: number) {\n\t\tconst mins = Math.floor(seconds / 60);\n\t\tconst secs = Math.floor(seconds % 60);\n\t\treturn `${mins}:${secs.toString().padStart(2, '0')}`;\n\t}\n\n\tfunction showControlsTemporarily() {\n\t\tshowControls = true;\n\t\tclearTimeout(controlsTimeout);\n\t\tcontrolsTimeout = setTimeout(() => {\n\t\t\tshowControls = false;\n\t\t}, 2500);\n\t}\n\n\tfunction handleMouseMove() {\n\t\tshowControlsTemporarily();\n\t}\n\n\tfunction handleWaiting() {\n\t\tisLoading = true;\n\t}\n\n\tfunction handleCanPlay() {\n\t\tisLoading = false;\n\t}\n\n\tonMount(() => {\n\t\tvideo.volume = volume;\n\t\tvideo.muted = isMuted;\n\n\t\tif (autoplay) {\n\t\t\tvideo.play().catch(() => {\n\t\t\t\tisMuted = true;\n\t\t\t\tvideo.muted = true;\n\t\t\t\tvideo.play();\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n<div\n\tclass={cn(\n\t\t'group relative flex aspect-video w-full min-w-[300px] items-center justify-center overflow-hidden rounded-xl bg-black shadow-lg',\n\t\tclassName\n\t)}\n\tonmousemove={handleMouseMove}\n\tonmouseleave={() => isPlaying && (showControls = false)}\n>\n\t<video\n\t\tbind:this={video}\n\t\t{src}\n\t\t{poster}\n\t\t{loop}\n\t\tclass=\"h-full w-full object-cover\"\n\t\tonplay={handlePlay}\n\t\tonpause={handlePause}\n\t\tontimeupdate={handleTimeUpdate}\n\t\tondurationchange={handleDurationChange}\n\t\tonwaiting={handleWaiting}\n\t\toncanplay={handleCanPlay}\n\t\tonclick={togglePlay}\n\t></video>\n\n\t{#if isLoading}\n\t\t<div class=\"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-[1px]\">\n\t\t\t<Loader2 class=\"h-10 w-10 animate-spin text-white/80\" />\n\t\t</div>\n\t{/if}\n\n\t{#if !isPlaying && !isLoading}\n\t\t<button\n\t\t\tonclick={togglePlay}\n\t\t\tclass=\"absolute inset-0 flex items-center justify-center bg-black/10 transition-opacity hover:bg-black/20\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"flex h-16 w-16 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur-sm transition-transform hover:scale-110\"\n\t\t\t>\n\t\t\t\t<Play class=\"ml-1 h-8 w-8 fill-white\" />\n\t\t\t</div>\n\t\t</button>\n\t{/if}\n\n\t<div\n\t\tclass={cn(\n\t\t\t'absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent px-4 pb-4 pt-12 transition-opacity duration-300',\n\t\t\tshowControls ? 'opacity-100' : 'opacity-0'\n\t\t)}\n\t>\n\t\t<div class=\"group/slider relative mb-4 flex h-4 w-full items-center\">\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin=\"0\"\n\t\t\t\tmax={duration || 0}\n\t\t\t\tbind:value={currentTime}\n\t\t\t\toninput={(e) => {\n\t\t\t\t\tconst el = e.currentTarget as HTMLInputElement;\n\t\t\t\t\tconst t = parseFloat(el.value);\n\t\t\t\t\tcurrentTime = t;\n\t\t\t\t\tvideo.currentTime = t;\n\t\t\t\t}}\n\t\t\t\tclass=\"absolute z-20 h-full w-full cursor-pointer opacity-0\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclass=\"absolute h-1 w-full rounded-full bg-white/20 transition-all group-hover/slider:h-1.5\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass=\"absolute h-1 rounded-full bg-white group-hover/slider:h-1.5\"\n\t\t\t\tstyle=\"width: {(currentTime / duration) * 100}%\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclass=\"absolute h-3 w-3 rounded-full bg-white opacity-0 shadow transition-opacity group-hover/slider:opacity-100\"\n\t\t\t\tstyle=\"left: {(currentTime / duration) * 100}%; transform: translateX(-50%)\"\n\t\t\t></div>\n\t\t</div>\n\n\t\t<div class=\"flex items-center justify-between gap-4\">\n\t\t\t<div class=\"flex items-center gap-4\">\n\t\t\t\t<button\n\t\t\t\t\tonclick={togglePlay}\n\t\t\t\t\tclass=\"text-white/90 hover:text-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary\"\n\t\t\t\t>\n\t\t\t\t\t{#if isPlaying}\n\t\t\t\t\t\t<Pause class=\"h-5 w-5 fill-white/90\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Play class=\"h-5 w-5 fill-white/90\" />\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\n\t\t\t\t<div class=\"group/volume flex items-center gap-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={toggleMute}\n\t\t\t\t\t\tclass=\"text-white/90 hover:text-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if isMuted || volume === 0}\n\t\t\t\t\t\t\t<VolumeX class=\"h-5 w-5\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Volume2 class=\"h-5 w-5\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex items-center justify-center w-0 h-10 p-2 overflow-hidden transition-all duration-300 group-hover/volume:w-20\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"group/slider relative flex h-4 w-full items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\t\t\tbind:value={volume}\n\t\t\t\t\t\t\t\toninput={(e) => {\n\t\t\t\t\t\t\t\t\tconst el = e.currentTarget as HTMLInputElement;\n\t\t\t\t\t\t\t\t\thandleVolumeChange(parseFloat(el.value));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclass=\"absolute z-20 h-full w-full cursor-pointer opacity-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"absolute h-1 w-full rounded-full bg-white/20 transition-all group-hover/slider:h-1.5\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"absolute h-1 rounded-full bg-white group-hover/slider:h-1.5\"\n\t\t\t\t\t\t\t\tstyle=\"width: {(volume / 1) * 100}%\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"absolute h-3 w-3 rounded-full bg-white opacity-0 shadow transition-opacity group-hover/slider:opacity-100\"\n\t\t\t\t\t\t\t\tstyle=\"left: {(volume / 1) * 100}%; transform: translateX(-50%)\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"text-xs font-medium text-white/90\">\n\t\t\t\t\t{formatTime(currentTime)} / {formatTime(duration || 0)}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<button\n\t\t\t\tonclick={toggleFullscreen}\n\t\t\t\tclass=\"text-white/90 hover:text-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary\"\n\t\t\t>\n\t\t\t\t{#if isFullscreen}\n\t\t\t\t\t<Minimize class=\"h-5 w-5\" />\n\t\t\t\t{:else}\n\t\t\t\t\t<Maximize class=\"h-5 w-5\" />\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\tinput[type='range'] {\n\t\tappearance: none;\n\t}\n\n\tinput[type='range']::-webkit-slider-thumb {\n\t\tappearance: none;\n\t\theight: 0;\n\t\twidth: 0;\n\t\tborder: none;\n\t}\n\n\tinput[type='range']::-moz-range-thumb {\n\t\theight: 0;\n\t\twidth: 0;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t}\n</style>\n",
			"type": "registry:ui",
			"target": "video/video.svelte"
		},
		{
			"content": "import Video from \"./video.svelte\";\n\nexport { Video };",
			"type": "registry:ui",
			"target": "video/index.ts"
		}
	]
}