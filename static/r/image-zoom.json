{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "image-zoom",
	"title": "Image Zoom",
	"type": "registry:ui",
	"description": "A component to zoom into images in an overlay.",
	"dependencies": [
		"@lucide/svelte@^0.554.0"
	],
	"devDependencies": [
		"@lucide/svelte@^0.544.0"
	],
	"registryDependencies": [
		"button"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\n\timport { writable } from 'svelte/store';\n\timport { setImageZoomContext, type ZoomImageData } from './ctx';\n\timport { fade } from 'svelte/transition';\n\timport { onMount, onDestroy, type Snippet } from 'svelte';\n\timport { Button } from '$lib/components/ui/button';\n\timport { X, ChevronLeft, ChevronRight } from '@lucide/svelte';\n\timport { cn } from '$UTILS$';\n\n\tlet {\n\t\tclass: className,\n\t\tchildren\n\t}: {\n\t\tclass?: string;\n\t\tchildren?: Snippet;\n\t} = $props();\n\n\tconst registeredImagesStore = writable<ZoomImageData[]>([]);\n\tconst currentImageIndexStore = writable<number | null>(null);\n\tconst openStore = writable(false);\n\n\tlet registeredImages = $state<ZoomImageData[]>([]);\n\tlet currentImageIndex = $state<number | null>(null);\n\tlet isOpen = $state(false);\n\n\t$effect(() => {\n\t\tregisteredImages = $registeredImagesStore;\n\t\tcurrentImageIndex = $currentImageIndexStore;\n\t\tisOpen = $openStore;\n\t});\n\n\tconst currentImageData = $derived(\n\t\tcurrentImageIndex !== null ? registeredImages[currentImageIndex] : null\n\t);\n\tconst hasMultipleImages = $derived(registeredImages.length > 1);\n\tconst hasPrevious = $derived(currentImageIndex !== null && currentImageIndex > 0);\n\tconst hasNext = $derived(\n\t\tcurrentImageIndex !== null && currentImageIndex < registeredImages.length - 1\n\t);\n\n\tfunction registerImage(imageData: Omit<ZoomImageData, 'index'>) {\n\t\tconst index = $registeredImagesStore.length;\n\t\t$registeredImagesStore = [...$registeredImagesStore, { ...imageData, index }];\n\t\treturn index;\n\t}\n\n\tfunction openImage(index: number) {\n\t\t$currentImageIndexStore = index;\n\t\t$openStore = true;\n\t}\n\n\tfunction nextImage() {\n\t\tif (currentImageIndex !== null && hasNext) {\n\t\t\t$currentImageIndexStore = currentImageIndex + 1;\n\t\t}\n\t}\n\n\tfunction prevImage() {\n\t\tif (currentImageIndex !== null && hasPrevious) {\n\t\t\t$currentImageIndexStore = currentImageIndex - 1;\n\t\t}\n\t}\n\n\tfunction closeZoom() {\n\t\t$openStore = false;\n\t\t$currentImageIndexStore = null;\n\t}\n\n\tsetImageZoomContext({\n\t\tregisteredImages: registeredImagesStore,\n\t\tcurrentImageIndex: currentImageIndexStore,\n\t\topen: openStore,\n\t\tregisterImage,\n\t\topenImage,\n\t\tnextImage,\n\t\tprevImage\n\t});\n\n\tfunction handleKeydown(event: KeyboardEvent) {\n\t\tif (!isOpen) return;\n\t\tif (event.key === 'Escape') closeZoom();\n\t\tif (event.key === 'ArrowLeft') prevImage();\n\t\tif (event.key === 'ArrowRight') nextImage();\n\t}\n</script>\n\n<svelte:window onkeydown={handleKeydown} />\n\n{#if isOpen && currentImageData}\n\t<div\n\t\tclass={cn('fixed inset-0 z-[10000] flex items-center justify-center bg-black/90', className)}\n\t\ttransition:fade={{ duration: 150 }}\n\t\taria-modal=\"true\"\n\t\trole=\"dialog\"\n\t\ttabindex=\"-1\"\n\t>\n\t\t<div class=\"absolute inset-0\" onclick={closeZoom} aria-label=\"Close\" role=\"button\"></div>\n\n\t\t<div\n\t\t\tclass=\"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center pointer-events-none\"\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc={currentImageData.src}\n\t\t\t\talt={currentImageData.alt}\n\t\t\t\tclass=\"block max-w-full max-h-full object-contain pointer-events-auto\"\n\t\t\t\ttransition:fade={{ duration: 300, delay: 50 }}\n\t\t\t/>\n\t\t</div>\n\n\t\t{#if hasMultipleImages}\n\t\t\t<Button\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclass=\"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 hover:bg-primary cursor-pointer pointer-events-auto disabled:opacity-30 disabled:pointer-events-none\"\n\t\t\t\tonclick={prevImage}\n\t\t\t\tdisabled={!hasPrevious}\n\t\t\t\taria-label=\"Previous image\"\n\t\t\t>\n\t\t\t\t<ChevronLeft class=\"h-8 w-8\" />\n\t\t\t</Button>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"ghost\"\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclass=\"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 hover:bg-primary cursor-pointer pointer-events-auto disabled:opacity-30 disabled:pointer-events-none\"\n\t\t\t\tonclick={nextImage}\n\t\t\t\tdisabled={!hasNext}\n\t\t\t\taria-label=\"Next image\"\n\t\t\t>\n\t\t\t\t<ChevronRight class=\"h-8 w-8\" />\n\t\t\t</Button>\n\t\t{/if}\n\n\t\t<Button\n\t\t\tvariant=\"ghost\"\n\t\t\tsize=\"icon\"\n\t\t\tclass=\"absolute top-4 right-4 pointer-events-auto text-white hover:text-gray-300 cursor-pointer hover:bg-primary\"\n\t\t\tonclick={closeZoom}\n\t\t\taria-label=\"Close zoomed image\"\n\t\t>\n\t\t\t<X class=\"h-6 w-6\" />\n\t\t</Button>\n\t</div>\n{/if}\n\n{@render children()}\n",
			"type": "registry:ui",
			"target": "image-zoom/image-zoom.svelte"
		},
		{
			"content": "<script lang=\"ts\">\n\timport { getImageZoomContext } from './ctx';\n\timport { cn } from '$UTILS$';\n\timport type { HTMLImgAttributes } from 'svelte/elements';\n\timport { onMount } from 'svelte';\n\n\ttype Props = HTMLImgAttributes & {\n\t\tclass?: string;\n\t};\n\n\tlet { src, alt, class: className, ...rest }: Props = $props();\n\n\tconst { registerImage, openImage } = getImageZoomContext();\n\n\tlet myIndex: number;\n\n\tonMount(() => {\n\t\tif (!src) {\n\t\t\tconsole.warn(\"ImageZoom.Trigger requires a 'src' prop.\");\n\t\t\treturn;\n\t\t}\n\t\tmyIndex = registerImage({ src, alt: alt || '' });\n\t});\n\n\tfunction handleOpenZoom() {\n\t\tif (myIndex !== undefined) {\n\t\t\topenImage(myIndex);\n\t\t}\n\t}\n</script>\n\n<img\n\tsrc={src || ''}\n\talt={alt || ''}\n\tclass={cn(\n\t\t'cursor-zoom-in transition-transform duration-200 hover:scale-[1.01] hover:brightness-90',\n\t\tclassName\n\t)}\n\tonclick={handleOpenZoom}\n\t{...rest}\n/>\n",
			"type": "registry:ui",
			"target": "image-zoom/image-zoom-trigger.svelte"
		},
		{
			"content": "import { getContext, setContext } from 'svelte';\nimport type { Writable } from 'svelte/store';\n\nconst IMAGE_ZOOM_KEY = Symbol('image-zoom');\n\nexport type ZoomImageData = {\n\tsrc: string;\n\talt: string;\n\tindex: number;\n};\n\ntype ImageZoomContext = {\n\tcurrentImageIndex: Writable<number | null>;\n\topen: Writable<boolean>;\n\n\tregisterImage: (imageData: Omit<ZoomImageData, 'index'>) => number;\n\topenImage: (index: number) => void;\n\n\tnextImage: () => void;\n\tprevImage: () => void;\n\n\tregisteredImages: Writable<ZoomImageData[]>;\n};\n\nexport function setImageZoomContext(ctx: ImageZoomContext) {\n\tsetContext(IMAGE_ZOOM_KEY, ctx);\n}\n\nexport function getImageZoomContext() {\n\tconst ctx = getContext<ImageZoomContext>(IMAGE_ZOOM_KEY);\n\tif (!ctx) {\n\t\tthrow new Error('ImageZoom.Trigger must be used inside an ImageZoom.Root');\n\t}\n\treturn ctx;\n}\n",
			"type": "registry:ui",
			"target": "image-zoom/ctx.ts"
		},
		{
			"content": "import Root from \"./image-zoom.svelte\";\nimport Trigger from \"./image-zoom-trigger.svelte\";\n\nexport {\n    Root,\n    Trigger\n};",
			"type": "registry:ui",
			"target": "image-zoom/index.ts"
		}
	]
}