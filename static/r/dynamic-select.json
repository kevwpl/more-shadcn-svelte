{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "dynamic-select",
	"title": "Dynamic Select",
	"type": "registry:ui",
	"description": "A combobox-style select that allows users to pick from predefined options or enter a custom value.",
	"dependencies": [
		"@lucide/svelte@^0.554.0"
	],
	"devDependencies": [
		"@lucide/svelte@^0.544.0"
	],
	"registryDependencies": [
		"button",
		"command",
		"popover"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\n\timport * as Popover from '$lib/components/ui/popover';\n\timport { setDynamicSelectContext } from './ctx';\n\timport type { Snippet } from 'svelte';\n\n\tlet {\n\t\tvalue = $bindable(''),\n\t\topen = $bindable(false),\n\t\tchildren\n\t}: {\n\t\tvalue?: string;\n\t\topen?: boolean;\n\t\tchildren: Snippet;\n\t} = $props();\n\n\tlet inputValue = $state('');\n\n\tsetDynamicSelectContext({\n\t\tget value() {\n\t\t\treturn { value };\n\t\t},\n\t\tget open() {\n\t\t\treturn { value: open };\n\t\t},\n\t\tget inputValue() {\n\t\t\treturn { value: inputValue };\n\t\t},\n\t\tsetValue: (v: string) => {\n\t\t\tvalue = v;\n\t\t\topen = false;\n\t\t}\n\t});\n</script>\n\n<Popover.Root bind:open>\n\t{@render children()}\n</Popover.Root>\n",
			"type": "registry:ui",
			"target": "dynamic-select/dynamic-select.svelte"
		},
		{
			"content": "<script lang=\"ts\">\n\timport { cn } from '$UTILS$';\n\timport * as Popover from '$lib/components/ui/popover';\n\timport { buttonVariants } from '$lib/components/ui/button';\n\timport { ChevronDown } from '@lucide/svelte';\n\timport { getDynamicSelectContext } from './ctx';\n\timport type { Snippet } from 'svelte';\n\n\tlet { class: className, children }: { class?: string; children: Snippet } = $props();\n\tconst ctx = getDynamicSelectContext();\n</script>\n\n<Popover.Trigger\n\tclass={cn(\n\t\tbuttonVariants({ variant: 'outline' }),\n\t\t'w-full justify-between font-normal',\n\t\tclassName\n\t)}\n>\n\t{#if ctx.value.value}\n\t\t{ctx.value.value}\n\t{:else}\n\t\t{@render children()}\n\t{/if}\n\t<ChevronDown class=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n</Popover.Trigger>\n",
			"type": "registry:ui",
			"target": "dynamic-select/dynamic-select-trigger.svelte"
		},
		{
			"content": "<script lang=\"ts\">\n\timport * as Popover from '$lib/components/ui/popover';\n\timport * as Command from '$lib/components/ui/command';\n\timport { getDynamicSelectContext } from './ctx';\n\timport type { Snippet } from 'svelte';\n\n\tlet { children }: { children: Snippet } = $props();\n\tconst ctx = getDynamicSelectContext();\n\n\tlet internalInput = $state('');\n\n\tfunction handleKeyDown(e: KeyboardEvent) {\n\t\tif (e.key === 'Enter' && internalInput.trim() !== '') {\n\t\t\tctx.setValue(internalInput);\n\t\t\tinternalInput = '';\n\t\t}\n\t}\n</script>\n\n<Popover.Content\n\tclass=\"w-[var(--bits-popover-anchor-width)] min-w-[var(--bits-popover-anchor-width)] p-0\"\n\talign=\"start\"\n>\n\t<Command.Root>\n\t\t<Command.Input\n\t\t\tplaceholder=\"Search or type custom...\"\n\t\t\tbind:value={internalInput}\n\t\t\tonkeydown={handleKeyDown}\n\t\t/>\n\t\t<Command.List>\n\t\t\t<Command.Empty>\n\t\t\t\t{#if internalInput.trim() !== ''}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"flex w-full cursor-pointer items-center px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground\"\n\t\t\t\t\t\tonclick={() => ctx.setValue(internalInput)}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd \"{internalInput}\"\n\t\t\t\t\t</button>\n\t\t\t\t{:else}\n\t\t\t\t\tNo results found.\n\t\t\t\t{/if}\n\t\t\t</Command.Empty>\n\t\t\t{@render children()}\n\t\t</Command.List>\n\t</Command.Root>\n</Popover.Content>\n",
			"type": "registry:ui",
			"target": "dynamic-select/dynamic-select-content.svelte"
		},
		{
			"content": "<script lang=\"ts\">\n\timport { cn } from '$UTILS$';\n\timport * as Command from '$lib/components/ui/command';\n\timport { Check } from '@lucide/svelte';\n\timport { getDynamicSelectContext } from './ctx';\n\timport type { Snippet } from 'svelte';\n\n\tlet { value, children }: { value: string; children: Snippet } = $props();\n\tconst ctx = getDynamicSelectContext();\n\tconst isSelected = $derived(ctx.value.value === value);\n</script>\n\n<Command.Item\n\t{value}\n\tonSelect={() => ctx.setValue(value)}\n\tclass=\"flex cursor-pointer items-center justify-between\"\n>\n\t{@render children()}\n\t<Check class={cn('h-4 w-4', isSelected ? 'opacity-100' : 'opacity-0')} />\n</Command.Item>\n",
			"type": "registry:ui",
			"target": "dynamic-select/dynamic-select-item.svelte"
		},
		{
			"content": "import { getContext, setContext } from 'svelte';\n\nconst DYNAMIC_SELECT_KEY = Symbol('dynamic-select');\n\ntype DynamicSelectContext = {\n\tvalue: { value: string };\n\topen: { value: boolean };\n\tinputValue: { value: string };\n\tsetValue: (v: string) => void;\n};\n\nexport function setDynamicSelectContext(props: DynamicSelectContext) {\n\tsetContext(DYNAMIC_SELECT_KEY, props);\n}\n\nexport function getDynamicSelectContext() {\n\treturn getContext<DynamicSelectContext>(DYNAMIC_SELECT_KEY);\n}\n",
			"type": "registry:ui",
			"target": "dynamic-select/ctx.ts"
		},
		{
			"content": "import Root from './dynamic-select.svelte';\nimport Trigger from './dynamic-select-trigger.svelte';\nimport Content from './dynamic-select-content.svelte';\nimport Item from './dynamic-select-item.svelte';\nimport { CommandGroup } from '$lib/components/ui/command';\n\nconst Group = CommandGroup;\n\nexport { Root, Trigger, Content, Item, Group };\n",
			"type": "registry:ui",
			"target": "dynamic-select/index.ts"
		}
	]
}